<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Wordle Clone using Meteor JS - Mario Toledo</title>
    <meta name="theme-color" content="#fff" />
    <meta name="author" content="Mario Toledo" />
    <meta name="reply-to" content="mariotoledo12@gmail.com" />
    <meta name="keywords" content="developer, full-stack, fullstack, software, computer, scientist, science, web" />
    <meta name="description" content="A Wordle Clone using Meteor JS" />
    <meta name="google-site-verification" content="vwj3bJu3eoSb2fQ2f0r_GbXh5OzK15pli3hUCqluARQ" />
    <link rel="shortcut icon" type="image/png" href="../images/favicon.png" />

    <!-- =================================== -->
    <!-- 			 FACEBOOK 				 -->
    <!-- =================================== -->

    <meta property="og:locale" content="pt-br" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Wordle Clone using Meteor JS - Mario Toledo" />
    <meta property="og:description" content="A Wordle Clone using Meteor JS" />
    <meta property="og:url" content="http://mariotoledo.me/blog/cellular-automata-map-generation.html" />
    <meta property="og:site_name" content="Mario Toledo" />
    <meta property="og:image" content="https://mariotoledo.me/blog/images/wordle-clone-meteor-js-cover.jpg" />
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="640">
    <meta property="og:image:height" content="360">

    <!-- =================================== -->
    <!-- 			  TWITTER 				 -->
    <!-- =================================== -->

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="https://mariotoledo.me" />
    <meta name="twitter:creator" content="@mariolptoledo" />
    <meta name="twitter:title" content="Wordle Clone using Meteor JS - Mario Toledo" />
    <meta name="twitter:description"
        content="A Wordle Clone using Meteor JS" />
    <meta name="twitter:domain" content="Mario Toledo" />
    <meta name="twitter:image" content="https://mariotoledo.me/blog/images/wordle-clone-meteor-js-cover.jpg" />

    <!-- =================================== -->
    <!-- 			  STYLE 				 -->
    <!-- =================================== -->

    <link rel="stylesheet" type="text/css" href="../semantic/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="blog.css">
    <link rel="stylesheet" type="text/css" href="blog-post.css">

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../semantic/semantic.min.js"></script>

    <style>
        .masthead:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: .4;
            z-index: -1;
            background: url(images/wordle-clone-meteor-js-cover.jpg);
            background-repeat: no-repeat;
            background-position: center center;
            background-size: cover;
        }
    </style>
</head>

<body>
    <div class="ui sidebar inverted vertical menu">
        <a data-section="home" class="item" href="../index.html#home">Home</a>
        <a data-section="about" class="item" href="../index.html#about">About Me</a>
        <a data-section="personal" class="item" href="../index.html#personal">Personal Projects</a>
        <a data-section="professional" class="item" href="../index.html#professional">Professional</a>
        <a data-section="academic" class="item" href="../index.html#academic">Academic</a>
        <a class="item" href="index.html">Blog</a>
        <a data-section="contact" class="item" href="../index.html#contact">Contact</a>
    </div>

    <div class="pusher">
        <div class="ui fixed inverted menu mobile-menu">
            <div class="ui container">
                <a class="toc item sidebar-menu-button"><i class="sidebar icon"></i></a>
                <a href="../index.html" class="header item">
                    <img class="logo" src="../images/favicon.png">
                    Mario Toledo
                </a>
            </div>
        </div>
        <div class="ui fixed inverted menu">
            <div class="ui container">
                <a href="../index.html" class="header item">
                    <img class="logo" src="../images/favicon.png">
                    Mario Toledo
                </a>
                <a href="../index.html#home" class="item">Home</a>
                <a href="../index.html#about" class="item">About Me</a>
                <a href="../index.html#personal" class="item">Personal Projects</a>
                <a href="../index.html#professional" class="item">Professional</a>
                <a href="../index.html#academic" class="item">Academic</a>
                <a href="index.html" class="item active">Blog</a>
                <a href="../index.html#contact" class="item">Contact</a>
            </div>
        </div>

        <div class="masthead segment">
            <div class="ui container">
                <div class="introduction">
                    <div class="ui black version label">
                        March 29, 2021
                    </div>
                    <h1 class="ui inverted header">
                        <span class="library">
                            Wordle Clone using Meteor JS
                        </span>
                    </h1>
                </div>
            </div>
        </div>
        <div class="ui text container">
            <div class="ui breadcrumb">
                <a href="../index.html" class="section">Home</a>
                <i class="right angle icon divider"></i>
                <a href="index.html" class="section">Blog</a>
                <i class="right angle icon divider"></i>
                <div class="active section">Wordle Clone using Meteor JS</div>
            </div>
            <p>
                This is an experiment I made about 5 years ago, and I decided to add here as a reference. This project uses Moore's Game of Life to generate random maps in a dungeon crawler game using cellular automata. The game was developed using Microsoft's XNA, because, in the time this experiment was made, it was still a good choice for 2D game creation. But nowadays, this experiement can be used easily.
            </p>
            <hr/>
            <h2>A brief introduction</h2>
            <p>While fantasy RPGs are already a genre division in the eletronic gaming universe, there are sub-genres that greatly changes the mechanics of a game. Among them, dungeon crawlers, which consists of controlling heroes through a maze inside a dungeon made of rooms connected by corridors.</p>
            <p align="center">
                <img class="ui fluid image" alt="In the left: Diablo 1, one of the successful games of its kin. In the right: Chobobo's Dungeon, for Playstation 1" src="images/cellular-automata/chocobodungeon.jpg" style="width: 100%"/>
                <i>In the left: Diablo 1, one of the successful games of its kin. In the right: Chobobo's Dungeon, for Playstation 1</i>
            </p>
            <p>
                It is common that in Dungeon Crawler games, the player is unaware of the map that he is entering for the first time. The dungeons have several levels, and at each level, the player must become familiar with the place.<br/>Usually, dungeons are created by a level design team, that changes the environment to their liking. However, this limits the levels to a restricted number, and also ensures that the player easily gets used to the other levels of the dungeon, making their game easier.
            </p>
            <p>
                To improve the player's experience and to ensure an unlimited number of levels, it is suggested to use random map generation. But how to do this in a way that the player can identify small patterns and proceed through the stages from the learning of previous levels?
            </p>
            <h2>Cellular Automata and The Game of Life</h2>
            <p>
                According to (AGUIAR; COSTA, 2000), Cellular Automata are simple mathematical models of natural systems. They are made up of a mesh, or reticulated, of identical and discrete cells, where each cell has its value over a finite set, for example, of integer values. The values ​​evolve in discrete time steps according to deterministic rules that specify the values ​​of each cell in terms of the values ​​of neighboring cells.
            </p>
            <p>
                For two-dimensional cellular automata, the best known model was the one developed by John Conway, in the so-called "Game of Life", where cells evolve from an initial state based on rules that simulate their birth, survival and death [2]:
                <ol>
                    <li>Any living cell with less than two living neighbors dies of loneliness;</li>
                    <li>Any living cell with more than three living neighbors dies of over-population;</li>
                    <li>Any dead cell with exactly three living neighbors becomes a living cell;</li>
                </ol>
            </p>
            <p align="center">
                <img class="ui fluid image" alt="Cells evolving in an implementation of the Game of Life" src="images/cellular-automata/jogoDaVida.jpg" style="width: 100%"/>
                <i>Cells evolving in an implementation of the Game of Life</i>
            </p>
            <p>
                The evolution of a cell into a cellular automaton depends on its neighborhood, composed of cells adjacent to the current cell and the cell itself. The Game of Life uses the model of Moore, in which the neighboring cells are always the 8 cells are around a certain cell.
            </p>
            <div class="ui grid">
                <div class="four wide column"></div>
                <div class="eight wide column">
                    <img class="ui fluid image" alt="Moore's model" src="images/cellular-automata/moore.jpg"/>
                    <p align="center">
                    <i>Moore's model</i>
                </p>
                </div>
                <div class="four wide column"></div>
            </div>
            <h2>The Project</h2>
            <p>
                In this project, we created the basic structure of a dungeon crawler game, where a hero can be controlled by the keyboard, respecting the laws of the map, which contains spaces that can not be advanced. <a href="https://github.com/mariotoledo/cellular-automata-map-generation/tree/basic_project" target="_blank">You may fork this version at the "basic_project" branch</a>.
            </p>
            <p>
                For the generation of the map, the class Tile was created to store information of each square of the Dungeon, considering that it has a format of an array. In general, a Tile represents the smallest space in a dungeon, storing not only its relative position on the map, but also its texture and other states.
            </p>
            <p>
                The Map class is responsible for generating the Dungeon Map and loading information for each Tile. The primary structure of the map is composed of an array of integers, which indicates the state of each Tile. This will allow to identify if a Tile is "walkable" or not (in the future, we can assign other states).
            </p>

            <pre><code>public class Map
{
    private int[,] map = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    {0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 9, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},};

    public Tile[,] Tiles { get; private set; 

    public Map(ContentManager contentManager)
    {
        Tiles = new Tile[map.GetLength(1), map.GetLength(0)];

        for (int y = 0; y < map.GetLength(0); y++)
        {
            for (int x = 0; x < map.GetLength(1); x++)
            {
                Tile tile = new Tile()
                {
                    Frame = new Rectangle(x * Settings.TILE_WIDTH, y * Settings.TILE_HEIGHT, Settings.TILE_WIDTH, Settings.TILE_HEIGHT),
                    IsWalkable = map[y, x] == 0 || map[y, x] == 2,
                    Texture = contentManager.Load<Texture2D>(map[y, x] == 0 || map[y, x] == 2  ? "tile1" : "tile2"),
                    MapPosition = new Vector2(x, y)
                };

                if (map[y, x] == 2)
                    starterTile = tile;

                Tiles[x, y] = tile;
            }
        }
    }
}</code></pre>
<p>
    When we run the project, we have a base structure that allows us to focus on the implementation of map generation based on the Game of Life rules.
</p>
<p align="center">
	<img class="ui fluid image" alt="Basic structure for map generation" src="images/cellular-automata/primeiroMapa.jpg"/><br/>
</p>

<h2>Applying Cellular Automata and The Game of Life rules in the project</h2>
<p>At first, our map structure is managed by an array of integers, where elements of values ​​0 indicate non-walking tiles, while elements of values ​​1 indicate walkable tiles.<br/>The application of the rules of the game of life suggests an initial configuration. To do this, our first step in dungeon generation is to create a random map, and to do so, we assign a chance for each cell to become a "walkable" element. That is, the chance of each cell being a "living" cell.</p>
<pre><code>public static float AUTOMATA_CHANCE_TO_STAY_ALIVE = 0.45f;</code></pre>
<p>With this, we generate random values ​​from 0 to 1, and assign a "live" or "dead" value to each map cell.</p>
<pre><code>for (int x = 0; x < map.GetLength(0); x++)
{
    for (int y = 0; y < map.GetLength(1); y++)
    {
        double r = new Random().NextDouble();
        if (NumericHelper.GetRandomNumber() < Settings.AUTOMATA_CHANCE_TO_STAY_ALIVE)
        {
            map[y, x] = 1;
        }
    }
}</code></pre>
<p>By running the project, we can see that the map contains scattered elements without any kind of pattern.</p>


<p align="center">
	<img class="ui fluid image" alt="Map generated randomsly, but without rules of life" src="images/cellular-automata/mapaAleatorioSemZoom.jpg"/><br/>
</p>

<p align="center">
	<img class="ui fluid image" alt="Map generated randomsly, but without rules of life" src="images/cellular-automata/mapaAleatorioComZoom.jpg" widtn="100%"/><br/>
</p>

<p>From the map generated above, we can apply the rules of the game of life to generate new cells. For this, we first need to create a way to identify living or dead cells that are neighbors to a given cell. In our code, we created a class called *GameOfLifeHelper* to focus methods that will allow to apply the rules of the game of life to our map. In this way, we created a method called *GetMooreNeighborsAlive*, which counts the number of live cells around a unique position of the map and the actual map itself.</p>

<pre><code>public static int GetMooreNeighborsAlive(int x, int y, int [,] map){
    int numberOfAliveNearbyCells = 0;

    for(int i = -1; i < 2; i++){
        for(int j = -1; j < 2; j++){
            int nearbyX = x + i;
            int nearbyY = y + j;

            if(i == 0 && j == 0){
                break;
            } else if(nearbyX < 0 || nearbyY < 0 || nearbyX >= map.GetLength(0) || nearbyY >= map.GetLength(1)){
                numberOfAliveNearbyCells++;
            } else if(map[nearbyX, nearbyY] == 1){
                numberOfAliveNearbyCells++;
            }
        }
    }

    return numberOfAliveNearbyCells;
}</code></pre>

<p>Now that we can count the neighboring living cells, we can apply the transition rules. In the Game of Life, the cells are changed simultaneously, from n iterations. For this to happen, in our *DoTransitionFromOldMap* method, we apply the rules from a map reference without changes.</p>

<pre><code>public static int[,] DoTransitionFromOldMap(int[,] oldMap)
{
    int[,] newMap = new int[oldMap.GetLength(0), oldMap.GetLength(1)];
    for (int x = 0; x < oldMap.GetLength(0); x++)
    {
        for (int y = 0; y < oldMap.GetLength(1); y++)
        {
            int numberOfAliveCells = GetMooreNeighborsAlive(x, y, oldMap);

            if(oldMap[x, y] == 1){
                if (numberOfAliveCells < Settings.AUTOMATA_NUMBER_OF_ALIVE_NEIGHBORS_ALLOWED)
                {
                    newMap[x, y] = 1;
                }
                else{
                    newMap[x, y] = 0;
                }
            }
            else{
                if (numberOfAliveCells > Settings.AUTOMATA_NUMBER_OF_DEAD_NEIGHBORS_ALLOWED)
                {
                    newMap[x, y] = 0;
                }
                else{
                    newMap[x, y] = 1;
                }
            }
        }
    }
    return newMap;
}</code></pre>

<p>In our project, we have defined a total number of iterations that will occur on the map.</p>

<pre><code>public static int GAME_OF_LIFE_NUMBER_OF_STEPS = 6;</code></pre>

<p>Next, we make a loop that will make the interactions on the map.</p>

<pre><code>for (int i = 0; i < Settings.GAME_OF_LIFE_NUMBER_OF_STEPS; i++)
{
    map = GameOfLifeHelper.DoTransitionFromOldMap(map);
}</code></pre>

<p>After running project, we have a map composed of cells grouped in greater quantities, like small caves of a single floor of the dungeon. With a greater number of interactions, we managed to leave these caves bigger and smaller paths between the map.</p>

<p align="center">
	<img class="ui fluid image" alt="Random map generated by cellular automata" src="images/cellular-automata/mapaAutonomo1.jpg"/><br/>
</p>

<p align="center">
	<img class="ui fluid image" alt="Random map generated by cellular automata" src="images/cellular-automata/mapaAutonomo2.jpg" widtn="100%"/><br/>
</p>

<h2>Future works</h2>

<p>There are several ways to help improve this project. Although the generation of random maps is possible with the use of cellular automata, many of the "caves" of the map are not interconnected. It is necessary to implement a way to identify caves, and from there, identify the caves that are not connected.</p>

<p>With the identification of caves, it is easy to insert enemies on the map. It is also suggested to insert start and end points on the map in such a way that these cells reach the maximum possible distance within the screen.</p>

<p>Also: I do wanna create this project using Phaser.JS, so we can try to modify the variables and see the difference in real time.</p>

<h2>References</h2>

<p>[1] AGUIAR, M. S. de; ROCHA COSTA, A. C. da. Automatos celulares para análise da monotonicidade da declividade de áreas geológicas. , [S.l.], 2001.</p>

<p>[2] Gardner, Marin - MATHEMATICAL GAMES The fantastic combinations of John Conway's new solitaire game "life"</p>

<p>[3] http://ppginf.ucpel.tche.br/TI-arquivos/2007/PPGINF-UCPel-TI-2007-2-01.pdf</p>

<p>[4] http://blog.monnet-usa.com/?cat=18</p>

            <div id="disqus_thread"></div>
            <script>
                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
                /*
                
                */
                var disqus_config = function () {
                this.page.url = 'http://mariotoledo.me/blog/cellular-automata-map-generation.html';
                this.page.identifier = 'cellular-automata-map-generation';
                };
                (function() {
                var d = document, s = d.createElement('script');
                s.src = 'https://mariotoledo-me.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>

        <div class="ui inverted vertical footer segment">
            <div class="ui center aligned container">
                <img src="../images/favicon.png" class="ui centered mini image">
                <div class="ui horizontal inverted small divided link list">
                    <a data-section="home" class="item" href="../index.html#home">Home</a>
                    <a data-section="about" class="item" href="../index.html#about">About Me</a>
                    <a data-section="personal" class="item" href="../index.html#personal">Personal Projects</a>
                    <a data-section="professional" class="item" href="../index.html#professional">Professional</a>
                    <a data-section="academic" class="item" href="../index.html#academic">Academic</a>
                    <a class="item" href="index.html">Blog</a>
                    <a data-section="contact" class="item" href="../index.html#contact">Contact</a>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.sidebar-menu-button').click(function () {
                $('.ui.sidebar').sidebar('toggle');
            });
        });
    </script>
    <!-- Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124641455-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'UA-124641455-1');
	</script>
</body>

</html>